<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Consulta de IP</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div style="padding: 16px;">
    
    <!-- Card de entrada -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>üåç Consulta de IP</ion-card-title>
        <ion-card-subtitle>Informa√ß√µes de geolocaliza√ß√£o</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        <!-- Campo de IP -->
        <ion-item>
          <ion-input
            label="Digite o IP:"
            placeholder="Ex: 8.8.8.8"
            [(ngModel)]="ip"
            [disabled]="carregando"
          ></ion-input>
        </ion-item>

        <!-- Bot√£o principal -->
        <ion-button expand="block" (click)="buscar()" [disabled]="carregando">
          <ion-spinner *ngIf="carregando"></ion-spinner>
          {{ carregando ? 'Buscando...' : 'üîç Buscar' }}
        </ion-button>

        <!-- Bot√£o do meu IP -->
        <ion-button expand="block" color="secondary" (click)="buscarMeuIP()" [disabled]="carregando">
          üìç Meu IP Atual
        </ion-button>

        <!-- IPs de exemplo -->
        <ion-list-header>
          <ion-label>Exemplos r√°pidos:</ion-label>
        </ion-list-header>
        
        <ion-grid>
          <ion-row>
            <ion-col size="4">
              <ion-button expand="block" size="small" color="tertiary" 
                         (click)="testarExemplo('google')" [disabled]="carregando">
                Google
              </ion-button>
            </ion-col>
            <ion-col size="4">
              <ion-button expand="block" size="small" color="tertiary" 
                         (click)="testarExemplo('cloudflare')" [disabled]="carregando">
                Cloudflare
              </ion-button>
            </ion-col>
            <ion-col size="4">
              <ion-button expand="block" size="small" color="tertiary" 
                         (click)="testarExemplo('brasil')" [disabled]="carregando">
                Brasil
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <!-- Mensagem de erro -->
    <ion-card *ngIf="erro" color="danger">
      <ion-card-content>
        <ion-icon name="warning"></ion-icon>
        {{ erro }}
      </ion-card-content>
    </ion-card>

    <!-- Resultados -->
    <ion-card *ngIf="resultado">
      <ion-card-header>
        <ion-card-title>üìä Resultado</ion-card-title>
        <ion-card-subtitle>Informa√ß√µes do IP: {{ resultado.ip }}</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        <ion-list lines="full">
          <ion-item>
            <ion-label>Pa√≠s:</ion-label>
            <ion-text>{{ resultado.country }} ({{ resultado.country_code }})</ion-text>
          </ion-item>

          <ion-item>
            <ion-label>Estado:</ion-label>
            <ion-text>{{ resultado.region }}</ion-text>
          </ion-item>

          <ion-item>
            <ion-label>Cidade:</ion-label>
            <ion-text>{{ resultado.city }}</ion-text>
          </ion-item>

          <ion-item>
            <ion-label>CEP:</ion-label>
            <ion-text>{{ resultado.postal_code || 'N/A' }}</ion-text>
          </ion-item>

          <ion-item>
            <ion-label>Coordenadas:</ion-label>
            <ion-text>{{ resultado.latitude }}, {{ resultado.longitude }}</ion-text>
          </ion-item>

          <ion-item>
            <ion-label>Provedor:</ion-label>
            <ion-text>{{ resultado.isp }}</ion-text>
          </ion-item>

          <ion-item>
            <ion-label>Timezone:</ion-label>
            <ion-text>{{ resultado.timezone }}</ion-text>
          </ion-item>
        </ion-list>

        <ion-button expand="block" color="medium" (click)="limpar()">
          üîÑ Nova Consulta
        </ion-button>
      </ion-card-content>
    </ion-card>

  </div>
</ion-content>